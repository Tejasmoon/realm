<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ultimate Realm Query Language Cheatsheet (Flutter)</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">

  <!-- Prism.js for syntax highlighting -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-dart.min.js"></script>

  <style>
    body {
      font-family: "Inter", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }

    html {
      scroll-behavior: smooth;
    }

    header {
      background: linear-gradient(135deg, #4a90e2, #357abd);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
    }

    header h1 {
      margin: 0;
      font-size: 2.5rem;
      font-weight: 600;
    }

    header p {
      margin-top: 0.5rem;
      font-size: 1.2rem;
      opacity: 0.9;
    }

    nav {
      background: #222;
      color: white;
      padding: 0.7rem;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 1000;
    }

    nav a {
      color: white;
      margin: 0 0.8rem;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.2s;
    }

    nav a:hover {
      color: #4a90e2;
    }

    section {
      padding: 2rem;
      max-width: 1000px;
      margin: auto;
    }

    h2 {
      color: #357abd;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.3rem;
      margin-top: 2rem;
      font-weight: 600;
    }

    pre, code {
      font-family: "JetBrains Mono", monospace;
      font-variant-ligatures: none; /* extra safeguard */
    }

/* Override Prism.js defaults */
code[class*="language-"],
pre[class*="language-"] {
  font-family: "JetBrains Mono", monospace !important;
  font-size: 1.0rem;
  line-height: 1.5;
}

    pre {
      border-radius: 6px;
      font-size: 0.95rem;
    }

    .example {
      background: #eef6ff;
      border-left: 4px solid #4a90e2;
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 6px;
    }

    .collapsible {
      background: #f1f1f1;
      cursor: pointer;
      padding: 0.8rem;
      width: 100%;
      border: none;
      text-align: left;
      outline: none;
      font-size: 1rem;
      margin-top: 1rem;
      border-radius: 6px;
      font-weight: bold;
    }

    .active, .collapsible:hover {
      background: #ddd;
    }

    .content {
      padding: 0.5rem 1rem;
      display: none;
      overflow: hidden;
      background: #fff;
      border-left: 3px solid #4a90e2;
      margin-bottom: 1rem;
      border-radius: 0 0 6px 6px;
    }

    footer {
      text-align: center;
      padding: 1rem;
      background: #222;
      color: white;
      margin-top: 2rem;
    }

    .note {
      font-size: 0.9rem;
      color: #666;
      margin-top: -0.5rem;
      margin-bottom: 1rem;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin: 1rem 0;
      font-size: 0.95rem;
    }

    table th, table td {
      border: 1px solid #ddd;
      padding: 0.6rem;
      text-align: left;
    }

    table th {
      background: #4a90e2;
      color: white;
    }

    table tr:nth-child(even) {
      background: #f9f9f9;
    }

    /* Floating Back to Top Button */
    #backToTop {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      z-index: 100;
      background: #4a90e2;
      color: white;
      border: none;
      padding: 12px 16px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 18px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      transition: background 0.3s;
    }

    #backToTop:hover {
      background: #357abd;
    }
  </style>
</head>
<body>
  <header>
    <h1>Ultimate Realm Query Language Cheatsheet</h1>
    <p>For Flutter Developers 🚀 — Complete with Examples</p>
  </header>

  <nav>
    <a href="#model">Model</a>
    <a href="#quickref">Quick Reference</a>
    <a href="#comparison">Comparison</a>
    <a href="#logical">Logical</a>
    <a href="#strings">Strings</a>
    <a href="#nulls">Nulls</a>
    <a href="#collections">Collections</a>
    <a href="#quantifiers">Quantifiers</a>
    <a href="#aggregates">Aggregates</a>
    <a href="#subqueries">Subqueries</a>
    <a href="#self">SELF</a>
    <a href="#keypaths">Keypaths</a>
    <a href="#dates">Dates</a>
    <a href="#sorting">Sorting</a>
    <a href="#predicates">Predicates</a>
    <a href="#parameters">Parameters</a>
    <a href="#bestpractices">Best Practices</a>
  </nav>

  <!-- Example Model -->
  <section id="model">
    <h2>Example Model</h2>
    <p class="note">All queries below assume this <code>Person</code> model:</p>
    <pre><code class="language-dart">import 'package:realm/realm.dart';

part 'person.g.dart';

@RealmModel()
class _Person {
  @PrimaryKey()
  late ObjectId id;
  late String name;
  late int age;
  late bool isActive;
  late List&lt;int&gt; scores;
  late List&lt;String&gt; tags;
  late List&lt;_Friend&gt; friends;
  late Map&lt;String, String&gt; attributes;
}

@RealmModel()
class _Friend {
  late String name;
  late int age;
}</code></pre>
  </section>

  <!-- Quick Reference Table -->
  <section id="quickref">
    <h2>Quick Reference Table</h2>
    <table>
      <tr><th>Category</th><th>Operators / Functions</th><th>Meaning</th></tr>
      <tr><td>Comparison</td><td>=, !=, >, <, >=, <=, BETWEEN, IN</td><td>Compare values</td></tr>
      <tr><td>Logical</td><td>AND, OR, NOT</td><td>Combine conditions</td></tr>
      <tr><td>Strings</td><td>BEGINSWITH, ENDSWITH, CONTAINS, LIKE, [c], [d], [cd]</td><td>String matching</td></tr>
      <tr><td>Nulls</td><td>= NULL, != NULL</td><td>Null checks</td></tr>
      <tr><td>Collections</td><td>CONTAINS, @count, @min, @max, @sum, @avg</td><td>Work with lists/sets/maps</td></tr>
      <tr><td>Quantifiers</td><td>ANY, ALL, NONE</td><td>Match conditions in collections</td></tr>
      <tr><td>Aggregates</td><td>@count, @min, @max, @sum, @avg</td><td>Aggregate functions</td></tr>
      <tr><td>Advanced</td><td>SUBQUERY, SELF, keypath traversal</td><td>Nested queries</td></tr>
      <tr><td>Dates</td><td>>=, <=, BETWEEN</td><td>Date comparisons</td></tr>
      <tr><td>Sorting</td><td>SORT(field ASC|DESC)</td><td>Sorting results</td></tr>
      <tr><td>Predicates</td><td>TRUEPREDICATE, FALSEPREDICATE</td><td>Always true/false</td></tr>
      <tr><td>Parameters</td><td>$0, $1, ...</td><td>Safe parameterized queries</td></tr>
    </table>
  </section>

  <section id="comparison">
    <h2>Comparison Operators</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people whose age is exactly 30
realm.query&lt;Person&gt;("age = 30");

// Find people whose age is not 25
realm.query&lt;Person&gt;("age != 25");

// Find people older than 18
realm.query&lt;Person&gt;("age > 18");

// Find people younger than 50
realm.query&lt;Person&gt;("age < 50");

// Find people aged 21 or older
realm.query&lt;Person&gt;("age >= 21");

// Find people aged 65 or younger
realm.query&lt;Person&gt;("age <= 65");

// Find people aged between 18 and 30
realm.query&lt;Person&gt;("age BETWEEN {18,30}");

// Find people living in NY, LA, or SF
realm.query&lt;Person&gt;("city IN {'NY','LA','SF'}");</code></pre>
    </div>
  </section>

  <section id="logical">
    <h2>Logical Operators</h2>
    <div class="example">
      <pre><code class="language-dart">// Find active people older than 18
realm.query&lt;Person&gt;("age > 18 AND isActive = true");

// Find people living in NY or LA
realm.query&lt;Person&gt;("city = 'NY' OR city = 'LA'");

// Find people who are NOT active
realm.query&lt;Person&gt;("NOT isActive = true");</code></pre>
    </div>
  </section>

  <section id="strings">
    <h2>String Operators</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people whose name starts with 'A'
realm.query&lt;Person&gt;("name BEGINSWITH 'A'");

// Find people whose email ends with '.com'
realm.query&lt;Person&gt;("email ENDSWITH '.com'");

// Find people whose name contains 'oh'
realm.query&lt;Person&gt;("name CONTAINS 'oh'");

// Find people whose name matches wildcard 'J*'
realm.query&lt;Person&gt;("name LIKE 'J*'");

// Case-insensitive search for 'john'
realm.query&lt;Person&gt;("name CONTAINS[c] 'john'");

// Diacritic-insensitive search for 'josé'
realm.query&lt;Person&gt;("name CONTAINS[d] 'josé'");

// Case + diacritic insensitive search for 'jose'
realm.query&lt;Person&gt;("name CONTAINS[cd] 'jose'");</code></pre>
    </div>
  </section>

  <section id="nulls">
    <h2>Null & Boolean Checks</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people with no nickname
realm.query&lt;Person&gt;("nickname = NULL");

// Find people who have a nickname
realm.query&lt;Person&gt;("nickname != NULL");

// Find people who are active
realm.query&lt;Person&gt;("isActive = true");

// Find people who are not active
realm.query&lt;Person&gt;("isActive = false");</code></pre>
    </div>
  </section>

  <section id="collections">
    <h2>Collections (Lists, Sets, Maps)</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people whose tags list contains 'flutter'
realm.query&lt;Person&gt;("tags CONTAINS 'flutter'");

// Find people with more than 2 tags
realm.query&lt;Person&gt;("tags.@count > 2");

// Find people whose skills set contains 'Dart'
realm.query&lt;Person&gt;("skills CONTAINS 'Dart'");

// Find people whose attributes map has role = 'admin'
realm.query&lt;Person&gt;("attributes['role'] = 'admin'");</code></pre>
    </div>
  </section>

  <section id="quantifiers">
    <h2>Quantifiers: ANY, ALL, NONE</h2>
    <button class="collapsible">ANY (at least one matches)</button>
    <div class="content">
      <pre><code class="language-dart">// Find people with at least one score above 90
realm.query&lt;Person&gt;("ANY scores > 90");

// Find people with at least one friend older than 30
realm.query&lt;Person&gt;("ANY friends.age > 30");</code></pre>
    </div>

    <button class="collapsible">ALL (every element must match)</button>
    <div class="content">
      <pre><code class="language-dart">// Find people where all scores are above 50
realm.query&lt;Person&gt;("ALL scores > 50");

// Find people where all friends are adults (18+)
realm.query&lt;Person&gt;("ALL friends.age >= 18");</code></pre>
    </div>

    <button class="collapsible">NONE (no element matches)</button>
    <div class="content">
      <pre><code class="language-dart">// Find people with no scores below 40
realm.query&lt;Person&gt;("NONE scores < 40");

// Find people with no friends named 'Bob'
realm.query&lt;Person&gt;("NONE friends.name = 'Bob'");</code></pre>
    </div>
  </section>

  <section id="aggregates">
    <h2>Aggregates</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people with more than 5 friends
realm.query&lt;Person&gt;("friends.@count > 5");

// Find people whose average score is at least 75
realm.query&lt;Person&gt;("scores.@avg >= 75");

// Find people whose maximum score is above 90
realm.query&lt;Person&gt;("scores.@max > 90");

// Find people whose minimum score is below 50
realm.query&lt;Person&gt;("scores.@min < 50");

// Find people whose total score sum is above 200
realm.query&lt;Person&gt;("scores.@sum > 200");</code></pre>
    </div>
  </section>

  <section id="subqueries">
    <h2>Subqueries</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people with more than 2 friends older than 18
realm.query&lt;Person&gt;("SUBQUERY(friends, $f, $f.age > 18).@count > 2");</code></pre>
    </div>
  </section>

  <section id="self">
    <h2>SELF Reference</h2>
    <div class="example">
      <pre><code class="language-dart">// Check if any tag equals the object itself
realm.query&lt;Person&gt;("ANY tags = SELF");</code></pre>
    </div>
  </section>

  <section id="keypaths">
    <h2>Keypath Traversal (Nested Objects)</h2>
    <div class="example">
      <pre><code class="language-dart">// Find people whose address city is London
realm.query&lt;Person&gt;("address.city = 'London'");

// Find people whose company department is Engineering
realm.query&lt;Person&gt;("company.department.name = 'Engineering'");</code></pre>
    </div>
  </section>

  <section id="dates">
    <h2>Date Queries</h2>
    <div class="example">
      <pre><code class="language-dart">// Find events starting on or after Jan 1, 2025
realm.query&lt;Event&gt;("startDate >= $0", [DateTime(2025, 1, 1)]);

// Find events between Jan 1 and Dec 31, 2025
realm.query&lt;Event&gt;("endDate BETWEEN {$0, $1}", [DateTime(2025,1,1), DateTime(2025,12,31)]);</code></pre>
    </div>
  </section>

  <section id="sorting">
    <h2>Sorting</h2>
    <div class="example">
      <pre><code class="language-dart">// Get all people sorted by age ascending
realm.query&lt;Person&gt;("TRUEPREDICATE SORT(age ASC)");

// Get all people sorted by name descending
realm.query&lt;Person&gt;("TRUEPREDICATE SORT(name DESC)");</code></pre>
    </div>
  </section>

  <section id="predicates">
    <h2>Predicates</h2>
    <div class="example">
      <pre><code class="language-dart">// Select all people
realm.query&lt;Person&gt;("TRUEPREDICATE");

// Select no people
realm.query&lt;Person&gt;("FALSEPREDICATE");</code></pre>
    </div>
  </section>

  <section id="parameters">
    <h2>Parameterized Queries</h2>
    <div class="example">
      <pre><code class="language-dart">// Find active adults in NY using parameters
final results = realm.query&lt;Person&gt;("age > $0 AND city = $1", [18, "NY"]);</code></pre>
    </div>
  </section>


  <section id="bestpractices">
    <h2>Best Practices & Tips</h2>
    <h3>Performance Tips</h3>
    <ul>
      <li>Use <b>indexes</b> on frequently queried fields (Realm auto-indexes primary keys).</li>
      <li>Prefer <code>IN</code> over multiple <code>OR</code> conditions for cleaner queries.</li>
      <li>Use <b>parameterized queries</b> (<code>$0, $1</code>) instead of string interpolation for safety and performance.</li>
      <li>Avoid overly complex <code>SUBQUERY</code> unless necessary.</li>
    </ul>

    <h3>Common Mistakes</h3>
    <ul>
      <li>❌ <code>name = John</code> → ✅ <code>name = 'John'</code> (strings must be quoted).</li>
      <li>❌ <code>name == 'John'</code> → ✅ <code>name = 'John'</code> (Realm uses single <code>=</code>).</li>
      <li>Forgetting to use <code>$0, $1</code> for parameters.</li>
    </ul>

    <h3>Chaining Queries</h3>
    <pre><code class="language-dart">// Step 1: Get adults
final adults = realm.query&lt;Person&gt;("age >= 18");

// Step 2: From adults, get only active ones
final activeAdults = adults.query("isActive = true");

// Step 3: Sort them by name
final sorted = activeAdults.query("TRUEPREDICATE SORT(name ASC)");</code></pre>

    <h3>Live Queries (Reactive Results)</h3>
    <pre><code class="language-dart">// Realm queries are live and auto-update
final results = realm.query&lt;Person&gt;("isActive = true");

results.changes.listen((changes) {
  print("Results updated! Count: ${changes.results.length}");
});</code></pre>
  </section>

  <footer>
    <p>Made with ❤️ for Flutter developers learning Realm</p>
  </footer>

  <!-- Back to Top Button -->
  <button id="backToTop" title="Back to top">↑</button>

  <script>
    // Collapsible sections
    const coll = document.getElementsByClassName("collapsible");
    for (let i = 0; i < coll.length; i++) {
      coll[i].addEventListener("click", function () {
        this.classList.toggle("active");
        const content = this.nextElementSibling;
        if (content.style.display === "block") {
          content.style.display = "none";
        } else {
          content.style.display = "block";
        }
      });
    }

    // Back to Top Button
    const backToTop = document.getElementById("backToTop");
    window.onscroll = function() {
      if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
        backToTop.style.display = "block";
      } else {
        backToTop.style.display = "none";
      }
    };
    backToTop.onclick = function() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    };
  </script>
</body>

</html>